# Руководство по поддержанию качества кода
# filepath: c:\Users\dimki\Project\middle_wares\CODE_QUALITY.md

# Руководство по поддержанию качества кода

## Процесс работы с проверкой качества кода

### 1. Автоматическая проверка

Для запуска проверки качества кода используйте:

```powershell
.\scripts\lint.ps1
```

Это запустит `ruff check` для проверки вашего кода на соответствие стандартам.

### 2. Автоматическое исправление

Для автоматического исправления некоторых проблем:

```powershell
.\scripts\fix_lint.ps1
```

### 3. Добавление документации

Для автоматического добавления базовой документации:

```powershell
python scripts\add_docs.py
```

Это добавит базовые шаблоны docstring к модулям, классам и функциям. После этого вам нужно будет вручную улучшить эти документации.

### 4. Ручные исправления

Не все проблемы можно исправить автоматически, особенно это касается улучшения документации. Используйте файл `EXAMPLES.md` для примеров правильного форматирования.

## Рекомендации по типам файлов

### Модули

Каждый модуль (`*.py`) должен начинаться с docstring, который описывает его назначение:

```python
"""Модуль для работы с данными матчей.

Содержит функции и классы для обработки и хранения информации о матчах.
"""
```

### Классы

Каждый класс должен иметь документацию, описывающую его назначение:

```python
class MatchRepository:
    """Репозиторий для управления объектами матча.
    
    Отвечает за хранение и получение данных о матчах.
    В будущем может быть расширен для работы с базой данных.
    """
```

### Функции и методы

Каждая публичная функция или метод должны иметь документацию:

```python
def update_match_score(self, player: str) -> Match | None:
    """Обновляет счет матча для указанного игрока.
    
    Args:
        player: Идентификатор игрока ('player1' или 'player2')
        
    Returns:
        Обновленный объект матча или None, если матч не найден
    """
```

## Форматирование кода

### Импорты

Импорты должны быть сгруппированы в следующем порядке:

1. Стандартная библиотека Python (os, sys, etc.)
2. Сторонние библиотеки (jinja2, etc.)
3. Внутренние импорты проекта

### Длина строк

Максимальная длина строки - 100 символов. Длинные строки нужно разбивать:

```python
# Неправильно
result = very_long_function_name(param1, param2, param3, param4, param5, very_long_parameter_name)

# Правильно
result = very_long_function_name(
    param1, param2, param3, 
    param4, param5, 
    very_long_parameter_name
)
```

### Пустые строки

- Используйте 2 пустые строки между определениями классов верхнего уровня
- Используйте 1 пустую строку между методами класса
- Используйте 1 пустую строку после заголовка документации и перед детальным описанием

## Рекомендации по стилю

### Именование

- Используйте `snake_case` для переменных, функций и методов
- Используйте `PascalCase` для классов
- Используйте `UPPER_CASE` для констант
- Используйте понятные и описательные имена

### Комментарии

- Используйте комментарии для пояснения сложных участков кода
- Но предпочтите писать самодокументируемый код, где это возможно
- Комментарии должны объяснять "почему", а не "что" делает код
